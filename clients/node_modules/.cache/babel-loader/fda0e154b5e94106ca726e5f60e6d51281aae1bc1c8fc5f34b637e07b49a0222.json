{"ast":null,"code":"var _jsxFileName = \"/home/bii/Desktop/My -Projects/Pitch-Crest/clients/src/Components/Login.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState } from 'react';\nimport User from './User/User';\nimport jwt_decode from \"jwt-decode\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = ({\n  onLogin\n}) => {\n  _s();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const response = await fetch('https://pitch-crest.onrender.com/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      if (!response.ok) {\n        throw new Error('Network response was not ok');\n      }\n      const data = await response.json();\n      const authenticatedUser = data.access_token;\n      // console.log('User ID:', data.user_id);\n\n      // const users_id = data.user_id\n\n      if (authenticatedUser) {\n        onLogin(authenticatedUser);\n      } else {\n        alert('Invalid credentials');\n      }\n    } catch (error) {\n      console.error('Error authenticating:', error);\n      alert('Error authenticating. Please try again.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex justify-center items-center h-screen\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-2\",\n          htmlFor: \"username\",\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n          id: \"username\",\n          type: \"text\",\n          placeholder: \"Username\",\n          value: email,\n          onChange: e => setEmail(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-2\",\n          htmlFor: \"password\",\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"shadow appearance-none border border-red rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline\",\n          id: \"password\",\n          type: \"password\",\n          value: password,\n          onChange: e => setPassword(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\",\n          type: \"submit\",\n          children: \"Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 9\n  }, this);\n};\n_s(Login, \"TSZhDBNy8CmbxXgprY/vvMmTG1Q=\");\n_c = Login;\nconst App = () => {\n  _s2();\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [authUser, setAuthUser] = useState(null);\n  const handleLogin = authenticatedUser => {\n    // Store user data in localStorage\n    localStorage.setItem('authToken', authenticatedUser);\n    const decoded_user = jwt_decode(authenticatedUser);\n    setAuthUser(decoded_user.sub);\n    console.log(decoded_user.sub);\n    // localStorage.setItem('user_id', users_id);\n\n    // setEmail(authenticatedUser);\n    setIsLoggedIn(true);\n    // setId(users_id);\n  };\n\n  const handleLogout = () => {\n    // Clear user data and token from localStorage\n    localStorage.removeItem('authToken');\n    setIsLoggedIn(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: !isLoggedIn ? /*#__PURE__*/_jsxDEV(Login, {\n      onLogin: handleLogin\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 28\n    }, this) : /*#__PURE__*/_jsxDEV(User, {\n      authUser: authUser,\n      onLogout: handleLogout\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 62\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 9\n  }, this);\n};\n_s2(App, \"j+8Ksca1FiXLM4mQ9d/oZF0NPEk=\");\n_c2 = App;\nexport default App;\nvar _c, _c2;\n$RefreshReg$(_c, \"Login\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useState","User","jwt_decode","jsxDEV","_jsxDEV","Login","onLogin","_s","email","setEmail","password","setPassword","handleSubmit","e","preventDefault","response","fetch","method","headers","body","JSON","stringify","ok","Error","data","json","authenticatedUser","access_token","alert","error","console","className","children","onSubmit","htmlFor","fileName","_jsxFileName","lineNumber","columnNumber","id","type","placeholder","value","onChange","target","_c","App","_s2","isLoggedIn","setIsLoggedIn","authUser","setAuthUser","handleLogin","localStorage","setItem","decoded_user","sub","log","handleLogout","removeItem","onLogout","_c2","$RefreshReg$"],"sources":["/home/bii/Desktop/My -Projects/Pitch-Crest/clients/src/Components/Login.js"],"sourcesContent":["import React, { useState } from 'react';\nimport User from './User/User';\nimport jwt_decode from \"jwt-decode\";\n\nconst Login = ({ onLogin }) => {\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    \n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n\n        try {\n            const response = await fetch('https://pitch-crest.onrender.com/login', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    email,\n                    password\n                })\n            });\n\n            if (!response.ok) {\n                throw new Error('Network response was not ok');\n            }\n            const data = await response.json();\n            const authenticatedUser = data.access_token;\n            // console.log('User ID:', data.user_id);\n            \n            // const users_id = data.user_id\n            \n\n            if (authenticatedUser) {\n                onLogin(authenticatedUser);\n                \n            } else {\n                alert('Invalid credentials');\n            }\n        } catch (error) {\n            console.error('Error authenticating:', error);\n            alert('Error authenticating. Please try again.');\n        }\n    };\n\n    return (\n        <div className=\"flex justify-center items-center h-screen\">\n            <form className=\"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4\" onSubmit={handleSubmit}>\n                <div className=\"mb-4\">\n                    <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"username\">\n                        Email\n                    </label>\n                    <input\n                        className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                        id=\"username\"\n                        type=\"text\"\n                        placeholder=\"Username\"\n                        value={email}\n                        onChange={(e) => setEmail(e.target.value)}\n                    />\n                </div>\n                <div className=\"mb-6\">\n                    <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"password\">\n                        Password\n                    </label>\n                    <input\n                        className=\"shadow appearance-none border border-red rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline\"\n                        id=\"password\"\n                        type=\"password\"\n                        value={password}\n                        onChange={(e) => setPassword(e.target.value)}\n                    />\n                </div>\n                <div className=\"flex items-center justify-between\">\n                    <button\n                        className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\n                        type=\"submit\"\n                    >\n                        Sign In\n                    </button>\n                </div>\n            </form>\n        </div>\n    );\n};\n\nconst App = () => {\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\n    const [authUser, setAuthUser] = useState(null);  \n\n   \n    const handleLogin = (authenticatedUser) => {\n        // Store user data in localStorage\n        localStorage.setItem('authToken', authenticatedUser);\n        const decoded_user = jwt_decode(authenticatedUser)\n        setAuthUser(decoded_user.sub)\n        console.log(decoded_user.sub);\n        // localStorage.setItem('user_id', users_id);\n    \n        // setEmail(authenticatedUser);\n        setIsLoggedIn(true);\n        // setId(users_id);\n    };\n\n    const handleLogout = () => {\n        // Clear user data and token from localStorage\n        localStorage.removeItem('authToken');        \n        setIsLoggedIn(false);\n       \n    };\n\n\n    return (\n        <div>\n            {!isLoggedIn ? <Login onLogin={handleLogin} /> : <User authUser={authUser}  onLogout={handleLogout}   />}\n            \n        </div>\n    );\n};\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}