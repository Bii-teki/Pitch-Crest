{"ast":null,"code":"import _objectSpread from\"/home/bii/pitch-crest-v2/Pitch-Crest/clients/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/home/bii/pitch-crest-v2/Pitch-Crest/clients/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/home/bii/pitch-crest-v2/Pitch-Crest/clients/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/bii/pitch-crest-v2/Pitch-Crest/clients/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/bii/pitch-crest-v2/Pitch-Crest/clients/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Profile from\"./Profile\";import Card from\"./Card\";import NewPost from\"./NewPost\";import{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function User(_ref){var authUser=_ref.authUser,onLogout=_ref.onLogout;var user_id=authUser===null||authUser===void 0?void 0:authUser.id;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),projects=_useState2[0],setProjects=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var url,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;url=\"https://pitch-crest.onrender.com/users/\".concat(user_id);_context.next=4;return fetch(url);case 4:response=_context.sent;if(response.ok){_context.next=7;break;}throw new Error(\"Network response was not ok\");case 7:_context.next=9;return response.json();case 9:data=_context.sent;console.log(\"API Response:\",data);setProjects(data.investors_info);setLoading(false);_context.next=19;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);setError(_context.t0.message);setLoading(false);case 19:case\"end\":return _context.stop();}},_callee,null,[[0,15]]);}));return function fetchData(){return _ref2.apply(this,arguments);};}();fetchData();},[user_id]);var deleteProject=function deleteProject(id){var new_user_projects=projects.filter(function(project){return project.id!==id;});setProjects(new_user_projects);};var addProject=function addProject(data){var new_projects=[data].concat(_toConsumableArray(projects));setProjects(new_projects);};var updateProject=function updateProject(id,updatedData){var updatedProjects=projects.map(function(project){if(project.id===id){return _objectSpread(_objectSpread({},project),updatedData);}return project;});setProjects(updatedProjects);};var handleLogout=function handleLogout(){onLogout();};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"section\",{id:\"projects\",className:\"flex flex-col justify-center items-center mr-6 mt-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"custom-grid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"custom-grid-item\",children:/*#__PURE__*/_jsx(Profile,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"custom-grid-item\",children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(Card,{projects:projects,loading:loading,error:error,deleteProject:deleteProject,updateProject:updateProject})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"custom-grid-item\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-2 mr-10 rounded\",children:authUser.name}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-2 rounded\",children:\"Logout\"}),/*#__PURE__*/_jsx(NewPost,{users_id:user_id,addProject:addProject})]})]})})});}export default User;","map":{"version":3,"names":["Profile","Card","NewPost","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","User","_ref","authUser","onLogout","user_id","id","_useState","_useState2","_slicedToArray","projects","setProjects","_useState3","_useState4","loading","setLoading","_useState5","_useState6","error","setError","fetchData","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","response","data","wrap","_callee$","_context","prev","next","concat","fetch","sent","ok","Error","json","console","log","investors_info","t0","message","stop","apply","arguments","deleteProject","new_user_projects","filter","project","addProject","new_projects","_toConsumableArray","updateProject","updatedData","updatedProjects","map","_objectSpread","handleLogout","children","className","name","onClick","users_id"],"sources":["/home/bii/pitch-crest-v2/Pitch-Crest/clients/src/Components/User/User.js"],"sourcesContent":["import Profile from \"./Profile\"\nimport Card from \"./Card\";\nimport NewPost from \"./NewPost\";\nimport { useEffect, useState } from \"react\";\n\n\n\nfunction User({ authUser, onLogout }) {\n  const user_id = authUser?.id\n  const [projects, setProjects] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const url = `https://pitch-crest.onrender.com/users/${user_id}`;\n        const response = await fetch(url);\n\n        if (!response.ok) {\n          throw new Error(\"Network response was not ok\");\n        }\n\n        const data = await response.json();\n        console.log(\"API Response:\", data); \n        setProjects(data.investors_info);\n        setLoading(false);\n      } catch (error) {\n        setError(error.message);\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, [user_id]);\n\n  const deleteProject = (id) => {\n    const new_user_projects = projects.filter(project => project.id !== id)\n    setProjects(new_user_projects)\n   }\n  \n   const addProject = (data) =>{\n     const new_projects= [data, ...projects]\n     setProjects(new_projects)\n   }\n\n   const updateProject = (id, updatedData) => {\n    const updatedProjects = projects.map(project => {\n      if (project.id === id) {\n        return { ...project, ...updatedData };\n      }\n      return project;\n    });\n  \n    setProjects(updatedProjects);\n  };\n  \n\n  const handleLogout = () => {\n\n    onLogout();\n};\n\n  return (\n<>\n    <section id=\"projects\" className=\"flex flex-col justify-center items-center mr-6 mt-2\">\n    <div className=\"custom-grid\">\n   \n      <div className=\"custom-grid-item\"><Profile/></div>\n      <div className=\"custom-grid-item\"> \n      <div>\n        \n           \n      \n        </div>      \n       \n        <Card projects={projects} loading={loading} error={error} deleteProject={deleteProject} updateProject={updateProject}/>\n      </div>\n      <div className=\"custom-grid-item\"> \n      <button\n      className=\"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-2 mr-10 rounded\">\n      {authUser.name}\n    </button>\n       <button \n      onClick={handleLogout} \n      className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-2 rounded\">\n      Logout\n    </button>\n       <NewPost users_id ={user_id} addProject={addProject}/></div>\n    </div>\n  </section>\n   \n    </>\n  );\n}\n\nexport default User;\n"],"mappings":"iqBAAA,MAAO,CAAAA,OAAO,KAAM,WAAW,CAC/B,MAAO,CAAAC,IAAI,KAAM,QAAQ,CACzB,MAAO,CAAAC,OAAO,KAAM,WAAW,CAC/B,OAASC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAI5C,QAAS,CAAAC,IAAIA,CAAAC,IAAA,CAAyB,IAAtB,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CAAEC,QAAQ,CAAAF,IAAA,CAARE,QAAQ,CAChC,GAAM,CAAAC,OAAO,CAAGF,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEG,EAAE,CAC5B,IAAAC,SAAA,CAAgCb,QAAQ,CAAC,IAAI,CAAC,CAAAc,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAvCG,QAAQ,CAAAF,UAAA,IAAEG,WAAW,CAAAH,UAAA,IAC5B,IAAAI,UAAA,CAA8BlB,QAAQ,CAAC,IAAI,CAAC,CAAAmB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAArCE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IAC1B,IAAAG,UAAA,CAA0BtB,QAAQ,CAAC,IAAI,CAAC,CAAAuB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAjCE,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IAEtBxB,SAAS,CAAC,UAAM,CACd,GAAM,CAAA2B,SAAS,6BAAAC,KAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,GAAA,CAAAC,QAAA,CAAAC,IAAA,QAAAL,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAERN,GAAG,2CAAAQ,MAAA,CAA6C7B,OAAO,EAAA0B,QAAA,CAAAE,IAAA,SACtC,CAAAE,KAAK,CAACT,GAAG,CAAC,QAA3BC,QAAQ,CAAAI,QAAA,CAAAK,IAAA,IAETT,QAAQ,CAACU,EAAE,EAAAN,QAAA,CAAAE,IAAA,eACR,IAAI,CAAAK,KAAK,CAAC,6BAA6B,CAAC,QAAAP,QAAA,CAAAE,IAAA,SAG7B,CAAAN,QAAQ,CAACY,IAAI,CAAC,CAAC,QAA5BX,IAAI,CAAAG,QAAA,CAAAK,IAAA,CACVI,OAAO,CAACC,GAAG,CAAC,eAAe,CAAEb,IAAI,CAAC,CAClCjB,WAAW,CAACiB,IAAI,CAACc,cAAc,CAAC,CAChC3B,UAAU,CAAC,KAAK,CAAC,CAACgB,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAY,EAAA,CAAAZ,QAAA,aAElBZ,QAAQ,CAACY,QAAA,CAAAY,EAAA,CAAMC,OAAO,CAAC,CACvB7B,UAAU,CAAC,KAAK,CAAC,CAAC,yBAAAgB,QAAA,CAAAc,IAAA,MAAApB,OAAA,iBAErB,kBAjBK,CAAAL,SAASA,CAAA,SAAAC,KAAA,CAAAyB,KAAA,MAAAC,SAAA,OAiBd,CAED3B,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,CAACf,OAAO,CAAC,CAAC,CAEb,GAAM,CAAA2C,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAI1C,EAAE,CAAK,CAC5B,GAAM,CAAA2C,iBAAiB,CAAGvC,QAAQ,CAACwC,MAAM,CAAC,SAAAC,OAAO,QAAI,CAAAA,OAAO,CAAC7C,EAAE,GAAKA,EAAE,GAAC,CACvEK,WAAW,CAACsC,iBAAiB,CAAC,CAC/B,CAAC,CAED,GAAM,CAAAG,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAIxB,IAAI,CAAI,CAC1B,GAAM,CAAAyB,YAAY,EAAGzB,IAAI,EAAAM,MAAA,CAAAoB,kBAAA,CAAK5C,QAAQ,EAAC,CACvCC,WAAW,CAAC0C,YAAY,CAAC,CAC3B,CAAC,CAED,GAAM,CAAAE,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIjD,EAAE,CAAEkD,WAAW,CAAK,CAC1C,GAAM,CAAAC,eAAe,CAAG/C,QAAQ,CAACgD,GAAG,CAAC,SAAAP,OAAO,CAAI,CAC9C,GAAIA,OAAO,CAAC7C,EAAE,GAAKA,EAAE,CAAE,CACrB,OAAAqD,aAAA,CAAAA,aAAA,IAAYR,OAAO,EAAKK,WAAW,EACrC,CACA,MAAO,CAAAL,OAAO,CAChB,CAAC,CAAC,CAEFxC,WAAW,CAAC8C,eAAe,CAAC,CAC9B,CAAC,CAGD,GAAM,CAAAG,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,CAAS,CAEzBxD,QAAQ,CAAC,CAAC,CACd,CAAC,CAEC,mBACFR,IAAA,CAAAI,SAAA,EAAA6D,QAAA,cACIjE,IAAA,YAASU,EAAE,CAAC,UAAU,CAACwD,SAAS,CAAC,qDAAqD,CAAAD,QAAA,cACtF/D,KAAA,QAAKgE,SAAS,CAAC,aAAa,CAAAD,QAAA,eAE1BjE,IAAA,QAAKkE,SAAS,CAAC,kBAAkB,CAAAD,QAAA,cAACjE,IAAA,CAACN,OAAO,GAAC,CAAC,CAAK,CAAC,cAClDQ,KAAA,QAAKgE,SAAS,CAAC,kBAAkB,CAAAD,QAAA,eACjCjE,IAAA,SAIO,CAAC,cAENA,IAAA,CAACL,IAAI,EAACmB,QAAQ,CAAEA,QAAS,CAACI,OAAO,CAAEA,OAAQ,CAACI,KAAK,CAAEA,KAAM,CAAC8B,aAAa,CAAEA,aAAc,CAACO,aAAa,CAAEA,aAAc,CAAC,CAAC,EACpH,CAAC,cACNzD,KAAA,QAAKgE,SAAS,CAAC,kBAAkB,CAAAD,QAAA,eACjCjE,IAAA,WACAkE,SAAS,CAAC,0EAA0E,CAAAD,QAAA,CACnF1D,QAAQ,CAAC4D,IAAI,CACR,CAAC,cACNnE,IAAA,WACDoE,OAAO,CAAEJ,YAAa,CACtBE,SAAS,CAAC,sEAAsE,CAAAD,QAAA,CAAC,QAEnF,CAAQ,CAAC,cACNjE,IAAA,CAACJ,OAAO,EAACyE,QAAQ,CAAG5D,OAAQ,CAAC+C,UAAU,CAAEA,UAAW,CAAC,CAAC,EAAK,CAAC,EAC1D,CAAC,CACC,CAAC,CAEN,CAAC,CAEP,CAEA,cAAe,CAAAnD,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}