{"ast":null,"code":"import _regeneratorRuntime from\"/home/bii/pitch-crest-v2/Pitch-Crest/clients/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/bii/pitch-crest-v2/Pitch-Crest/clients/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/bii/pitch-crest-v2/Pitch-Crest/clients/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import User from'./User/User';import jwt_decode from\"jwt-decode\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(_ref){var onLogin=_ref.onLogin;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var response,data,authenticatedUser;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return fetch('https://pitch-crest.onrender.com/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email,password:password})});case 4:response=_context.sent;if(response.ok){_context.next=7;break;}throw new Error('Network response was not ok');case 7:_context.next=9;return response.json();case 9:data=_context.sent;authenticatedUser=data.access_token;// console.log('User ID:', data.user_id);\n// const users_id = data.user_id\nif(authenticatedUser){onLogin(authenticatedUser);}else{alert('Invalid credentials');}_context.next=18;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](1);console.error('Error authenticating:',_context.t0);alert('Error authenticating. Please try again.');case 18:case\"end\":return _context.stop();}},_callee,null,[[1,14]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-screen\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"username\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",id:\"username\",type:\"text\",placeholder:\"Username\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"shadow appearance-none border border-red rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline\",id:\"password\",type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\",type:\"submit\",children:\"Sign In\"})})]})});};var App=function App(){var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoggedIn=_useState6[0],setIsLoggedIn=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),authUser=_useState8[0],setAuthUser=_useState8[1];var handleLogin=function handleLogin(authenticatedUser){// Store user data in localStorage\nlocalStorage.setItem('authToken',authenticatedUser);var decoded_user=jwt_decode(authenticatedUser);setAuthUser(decoded_user.sub);console.log(decoded_user.sub);// localStorage.setItem('user_id', users_id);\n// setEmail(authenticatedUser);\nsetIsLoggedIn(true);// setId(users_id);\n};var handleLogout=function handleLogout(){// Clear user data and token from localStorage\nlocalStorage.removeItem('authToken');setIsLoggedIn(false);};return/*#__PURE__*/_jsx(\"div\",{children:!isLoggedIn?/*#__PURE__*/_jsx(Login,{onLogin:handleLogin}):/*#__PURE__*/_jsx(User,{authUser:authUser,onLogout:handleLogout})});};export default App;","map":{"version":3,"names":["React","useState","User","jwt_decode","jsx","_jsx","jsxs","_jsxs","Login","_ref","onLogin","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","handleSubmit","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","response","data","authenticatedUser","wrap","_callee$","_context","prev","next","preventDefault","fetch","method","headers","body","JSON","stringify","sent","ok","Error","json","access_token","alert","t0","console","error","stop","_x","apply","arguments","className","children","onSubmit","htmlFor","id","type","placeholder","value","onChange","target","App","_useState5","_useState6","isLoggedIn","setIsLoggedIn","_useState7","_useState8","authUser","setAuthUser","handleLogin","localStorage","setItem","decoded_user","sub","log","handleLogout","removeItem","onLogout"],"sources":["/home/bii/pitch-crest-v2/Pitch-Crest/clients/src/Components/Login.js"],"sourcesContent":["import React, { useState } from 'react';\nimport User from './User/User';\nimport jwt_decode from \"jwt-decode\";\n\nconst Login = ({ onLogin }) => {\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    \n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n\n        try {\n            const response = await fetch('https://pitch-crest.onrender.com/login', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    email,\n                    password\n                })\n            });\n\n            if (!response.ok) {\n                throw new Error('Network response was not ok');\n            }\n            const data = await response.json();\n            const authenticatedUser = data.access_token;\n            // console.log('User ID:', data.user_id);\n            \n            // const users_id = data.user_id\n            \n\n            if (authenticatedUser) {\n                onLogin(authenticatedUser);\n                \n            } else {\n                alert('Invalid credentials');\n            }\n        } catch (error) {\n            console.error('Error authenticating:', error);\n            alert('Error authenticating. Please try again.');\n        }\n    };\n\n    return (\n        <div className=\"flex justify-center items-center h-screen\">\n            <form className=\"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4\" onSubmit={handleSubmit}>\n                <div className=\"mb-4\">\n                    <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"username\">\n                        Email\n                    </label>\n                    <input\n                        className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                        id=\"username\"\n                        type=\"text\"\n                        placeholder=\"Username\"\n                        value={email}\n                        onChange={(e) => setEmail(e.target.value)}\n                    />\n                </div>\n                <div className=\"mb-6\">\n                    <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"password\">\n                        Password\n                    </label>\n                    <input\n                        className=\"shadow appearance-none border border-red rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline\"\n                        id=\"password\"\n                        type=\"password\"\n                        value={password}\n                        onChange={(e) => setPassword(e.target.value)}\n                    />\n                </div>\n                <div className=\"flex items-center justify-between\">\n                    <button\n                        className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\n                        type=\"submit\"\n                    >\n                        Sign In\n                    </button>\n                </div>\n            </form>\n        </div>\n    );\n};\n\nconst App = () => {\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\n    const [authUser, setAuthUser] = useState(null);  \n\n   \n    const handleLogin = (authenticatedUser) => {\n        // Store user data in localStorage\n        localStorage.setItem('authToken', authenticatedUser);\n        const decoded_user = jwt_decode(authenticatedUser)\n        setAuthUser(decoded_user.sub)\n        console.log(decoded_user.sub);\n        // localStorage.setItem('user_id', users_id);\n    \n        // setEmail(authenticatedUser);\n        setIsLoggedIn(true);\n        // setId(users_id);\n    };\n\n    const handleLogout = () => {\n        // Clear user data and token from localStorage\n        localStorage.removeItem('authToken');        \n        setIsLoggedIn(false);\n       \n    };\n\n\n    return (\n        <div>\n            {!isLoggedIn ? <Login onLogin={handleLogin} /> : <User authUser={authUser}  onLogout={handleLogout}   />}\n            \n        </div>\n    );\n};\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}